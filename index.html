<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Canvas Exercise</title>
</head>
<body>
  <canvas id="canvas" width="640" height="480"></canvas>
  <script type="text/javascript">
  (function() {
    var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");

    var mouse = {
      x: canvas.width/2,
      y: canvas.height/2,
      pressed: false
    };
    var radius, displayRadius = 0;

    canvas.addEventListener("mousemove", function(event) {
      var canvasRect = canvas.getBoundingClientRect();
      mouse.x = event.clientX - canvasRect.x;
      mouse.y = event.clientY - canvasRect.y;
    });

    canvas.addEventListener("mousedown", function(event) {
      mouse.pressed = true;
    });

    canvas.addEventListener("mouseup", function(event) {
      mouse.pressed = false;
    });

    var update = function() {
      radius = mouse.pressed ? 30 : 50;
      displayRadius += (radius - displayRadius)/4;

      context.clearRect(0, 0, canvas.width, canvas.height);

      context.beginPath();
      context.arc(mouse.x, mouse.y, displayRadius, 0, Math.PI*2);
      context.closePath;
      context.fill();

      requestAnimationFrame(update);
    };

    update();
  })();
  </script>
</body>
</html>
